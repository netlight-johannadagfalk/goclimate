<%
  set_meta_tags(
    site: 'GoClimate - Every action counts',
    description: t('climate_change_is_the_greatest_challange')
  )
%>

<nav class="bg-blue-tint-1">
  <%= render "shared/header" %>
</nav>

<section class="z-0 bg-blue-tint-1">
  <div class="relative z-20 max-w-3xl mx-auto px-4 t:px-16 d:px-0 pt-16 t:pt-24 d:pt-32 text-center">
    <h1 class="heading-xl mb-6 t:mb-12">
      <%=t 'views.welcome.index.hero.heading' %><br>
    </h1>
    <p class="my-4 max-w-lg mx-auto"><%=t 'views.welcome.index.hero.body_text' %></p>
    <div>
      <%= form_with url: new_lifestyle_footprint_path, method: :get, class: 'm-lg:flex m-lg:justify-center mt-3' do |f| %>
        <div class="select-wrapper w-full m-lg:w-auto m-lg:max-w-xs">
          <label for="country" class="sr-only">Select your country</label>
          <%= f.country_select :country,
                {
                  include_blank: t('views.welcome.index.i_live_in'),
                  priority_countries: [
                    ISO3166::Country.new(request.headers['CF-IPCountry'])&.alpha2 || current_region.country_codes
                  ].flatten.compact
                },
                {
                  class: 'select',
                  required: ''
                } %>
        </div>
        <%= f.submit t('views.welcome.index.get_started'), name: nil, class: 'button button-cta mt-2 m-lg:mt-0 m-lg:ml-2 w-full m-lg:w-auto' %>
      <% end %>
    </div>
  </div>
  <div class="relative z-10 overflow-x-hidden w-full h-96 t:h-128 relative t:-mt-16">
    <div class="absolute h-full w-full">
      <div class="relative h-full mx-auto" style="max-width: 1440px">
        <%= image_tag webpack_asset_path('images/illustrations/hero/left_behind_horizon-1x.png'), 
          srcset: { 
              webpack_asset_path('images/illustrations/hero/left_behind_horizon-2x.png') => "2x"
          }, 
          class: 'absolute right-1/2 d:right-auto d:left-0 h-full max-w-none', 
          style: 'margin-left: -120px', alt: '' %>
        <%= image_tag webpack_asset_path('images/illustrations/hero/right_behind_horizon-1x.png'),
          srcset: { 
              webpack_asset_path('images/illustrations/hero/right_behind_horizon-2x.png') => "2x"
          },
          class: 'absolute left-1/3 m-lg:left-1/2 d:left-auto d:right-0 h-full max-w-none',
          style: 'margin-right: -120px', alt: '' %>
      </div>
    </div>
    <div class="absolute h-full w-full">
      <%= image_tag webpack_asset_path('images/illustrations/hero/horizon.svg'), class: 'w-full h-full', alt: '' %>
    </div>
    <div class="absolute h-full w-full">
      <div class="h-full mx-auto text-center d-md:space-x-4">
        <%= image_tag webpack_asset_path('images/illustrations/hero/middle_left-1x.png'),
          srcset: { 
            webpack_asset_path('images/illustrations/hero/middle_left-2x.png') => "2x"
          },
          class: 'hidden d-md:inline h-full max-w-none', alt: '' %>
        <%= image_tag webpack_asset_path('images/illustrations/hero/middle_right-1x.png'),
          srcset: { 
            webpack_asset_path('images/illustrations/hero/middle_right-2x.png') => "2x"
          },
          class: 'hidden d:inline h-full max-w-none', alt: '' %>
      </div>
    </div>
    <div class="absolute h-full w-full">
      <div class="relative h-full mx-auto" style="max-width: 1440px">
        <%= image_tag webpack_asset_path('images/illustrations/hero/left-1x.png'),
          srcset: { 
            webpack_asset_path('images/illustrations/hero/left-2x.png') => "2x"
          },
          class: 'absolute right-1/3 m-lg:right-1/2 d:right-auto d:left-0 h-full max-w-none',
          style: 'margin-left: -120px', alt: '' %>
        <%= image_tag webpack_asset_path('images/illustrations/hero/right-1x.png'),
          srcset: { 
            webpack_asset_path('images/illustrations/hero/right-2x.png') => "2x"
          },
          class: 'absolute left-2/3 m-lg:left-1/2 d:left-auto d:right-0 h-full max-w-none',
          style: 'margin-right: -120px', alt: '' %>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="bg-green-tint-1">
    <div class="section-padding pt-0">
      <div class="flex flex-col m-lg:flex-row justify-center text-center space-y-12 m-lg:space-y-0 m-lg:space-x-16 d:space-x-32">
        <div>
          <p style="min-width=300px;"><%=t 'welcome.users_prefix' %></p>
          <p class="font-bold text-5xl text-green-accent text-center">
            <span id="total-users"
              data-controller="counting-number"
              data-target-number="<%= @unique_climate_neutral_users %>">
              <%= number_with_delimiter(@unique_climate_neutral_users) %>
            </span>
          </p>
          <p><%=t 'welcome.users_suffix' %></p>
        </div>
        <div>
          <p style="min-width=300px;"><%=t 'welcome.tonnes_prefix' %></p>
          <p class="font-bold text-5xl text-green-accent text-center">
            <span id="total-carbon-offset"
              data-controller="counting-number"
              data-target-number="<%= @total_carbon_offset %>">
              <%= number_with_delimiter(@total_carbon_offset) %>
            </span>
          </p>
          <p><%=t 'welcome.tonnes_suffix' %></p>
        </div>
      </div>
    </div>
  </div>
  <div class="-mt-2">
    <%= image_tag webpack_asset_path('images/illustrations/landscape_full_bottom.png'), alt: '' %>
  </div>
</section>

<section class="section-padding">
  <h2 class="heading-lg text-center mb-12"><%=t 'this_is_how_it_works' %></h2>
  <div class="flex flex-col items-center t:flex-row t:items-stretch section-gutter">
    <% [
      {
        image_url: 'images/illustrations/describe_lifestyle.png',
        title: t('views.welcome.index.how_it_works.bullets.bullet_1_heading'),
        body: t('views.welcome.index.how_it_works.bullets.bullet_1_text')
      },
      {
        image_url: 'images/illustrations/sign_up.png',
        title: t('views.welcome.index.how_it_works.bullets.bullet_2_heading'),
        body: t('views.welcome.index.how_it_works.bullets.bullet_2_text')
      },
      {
        image_url: 'images/illustrations/save_the_planet.png',
        title: t('views.welcome.index.how_it_works.bullets.bullet_3_heading'),
        body: t('views.welcome.index.how_it_works.bullets.bullet_3_text')
      }
    ].each_with_index do |item, i| %>
      <div class="w-full m-lg:w-3/4 d:w-1/3 pt-16">
        <div class="h-full callout p-4 d:p-8">
          <%= image_tag webpack_asset_path(item[:image_url]), class: '-mt-24 mx-auto', alt: '' %>
          <h3 class="text-lg font-semibold my-2 text-center"><%= "#{i + 1}. #{item[:title]}" %></h3>
          <p><%= item[:body] %></p>
        </div>
      </div>
    <% end %>
  </div>
</section>

<section class="section-padding">
  <div class="section-gutter t:flex flex-row items-center">
    <div class="t:w-1/2">
      <h2 class="heading-lg"><%= t 'views.welcome.index.about_us.heading' %></h2>
      <p class="my-6"><%=t 'views.welcome.index.about_us.body_text' %></p>
      <div class="text-center t:text-left">
        <%= link_to t('views.welcome.index.about_us.read_more'), about_path, class: 'button mx-auto t:mx-0' %>
      </div>
    </div>
    <div class="t:w-1/2 m-lg:max-w-3/4 mx-auto">
      <div class="relative w-full h-full pb-3/4">
        <% if I18n.locale == :sv %>
        <iframe title="What is GoClimate?" src='https://player.vimeo.com/video/241825913' align='top' frameborder='0' webkitAllowFullScreen
          mozallowfullscreen allowFullScreen class="absolute top-0 left-0 w-full h-full"></iframe>
        <% else %>
        <iframe title="What is GoClimate?" src='https://player.vimeo.com/video/246406263' align='top' frameborder='0' webkitAllowFullScreen
          mozallowfullscreen allowFullScreen class="absolute top-0 left-0 w-full h-full"></iframe>
        <% end %>
      </div>
    </div>
  </div>
</section>

<section class="section-padding">
  <div class="section-gutter flex flex-col t:flex-row-reverse items-center">
    <div class="t:w-1/2 space-y-6">
      <h2 class="heading-lg">
        <%= t 'views.welcome.index.projects.heading' %>
      </h2>
      <ul class="list-check space-y-3">
        <li><%= t 'views.welcome.index.projects.body_text_1' %></li>
        <li><%= t 'views.welcome.index.projects.body_text_2' %></li>
        <li><%= t 'views.welcome.index.projects.body_text_3' %></li>
      </ul>
    </div>
    <div class="t:w-1/2 m-lg:max-w-3/4">
      <div class="callout flex flex-col d:flex-row items-center space-y-8 d:space-y-0 d:space-x-8">
        <div class="w-2/3 m-lg:w-1/3 flex-shrink-0">
          <div class="relative pb-full">
            <%= image_tag @latest_project.image_url, class: 'absolute w-full h-full object-cover rounded-full', alt: '' %>
          </div>
        </div>
        <div class="flex-grow">
          <h3 class="heading"><%= @latest_project.name %>, <%= @latest_project.country %></h3>
          <%= simple_format(@latest_project.short_description) %>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-12 text-center">
    <%= link_to t('views.welcome.index.projects.read_more'), projects_path, class: 'button mx-auto t:mx-0' %>
  </div>
</section>

<section class="section-padding">
  <div class="section-gutter t:flex t:flex-row t:items-center">
    <div class="t:w-1/2 space-y-6">
      <h2 class="heading-lg">
        <%= t 'views.welcome.index.transparency.heading' %>
      </h2>
      <p><%= t 'views.welcome.index.transparency.body_text' %></p>
      <div class="text-center t:text-left">
        <%= link_to t('views.welcome.index.transparency.read_more'), transparency_path, class: 'button mx-auto t:mx-0' %>
      </div>
    </div>
    <div class="t:w-1/2">
      <%= image_tag webpack_asset_path('images/illustrations/transparency.png'), 
        srcset: { 
            webpack_asset_path("images/illustrations/transparency-2x.png") => "2x", 
            webpack_asset_path("images/illustrations/transparency-3x.png") => "3x" 
        }, 
        class: 'w-full max-w-md mx-auto', alt: '' %>
    </div>
  </div>
</section>

<section class="section-padding">
  <h2 class="heading-lg text-center mb-12">
    <%= t 'views.welcome.index.climate_tips.heading' %>
  </h2>
  <div class="section-gutter flex flex-col items-center t:flex-row t:items-stretch">
      <% (I18n.locale == :sv ? [
        {
          key: 'climate_friendly_housing_cooperative',
          image_url: 'images/blog/brf-1x.jpg',
          image_url_2x: 'images/blog/brf-2x.jpg',
          url: 'https://www.goclimate.com/blog/klimatsmart-bostadsrattsforening-sa-kan-du-paverka-din-forening/',
        },
        {
          key: 'climate_friendly_pension_saving',
          image_url: 'images/blog/pension-1x.jpg',
          image_url_2x: 'images/blog/pension-2x.jpg',
          url: 'https://www.goclimate.com/blog/klimatsmart-pensionssparande/',
        },
        {
          key: 'civil_disobedience',
          image_url: 'images/blog/protest-1x.jpg',
          image_url_2x: 'images/blog/protest-2x.jpg',
          url: 'https://www.goclimate.com/blog/civil-olydnad-for-klimatet/',
        }
        ] : [
        {
          key: 'clothes_last_longer',
          image_url: 'images/blog/clothes-1x.jpg',
          image_url_2x: 'images/blog/clothes-2x.jpg',
          url: 'https://www.goclimate.com/blog/how-to-make-your-clothes-last-longer/',
        },
        {
          key: 'reduce_carbon_footprint_food',
          image_url: 'images/blog/food-1x.jpg',
          image_url_2x: 'images/blog/food-2x.jpg',
          url: 'https://www.goclimate.com/blog/how-to-reduce-your-carbon-footprint-food/',
        },
        {
          key: 'civil_disobedience',
          image_url: 'images/blog/protest-1x.jpg',
          image_url_2x: 'images/blog/protest-2x.jpg',
          url: 'https://www.goclimate.com/blog/civil-disobedience-for-the-climate/',
        }
        ]).each do |item| %>
        <div class="w-full m-lg:w-3/4 t:w-1/3">
          <div class="h-full overflow-hidden bg-green-tint-1 rounded-lg shadow-lg">
            <div class="pb-1/2 relative">
              <%= image_tag webpack_asset_path(item[:image_url]), 
                srcset: { 
                    webpack_asset_path(item[:image_url_2x]) => "2x"
                }, 
                class: 'absolute top-0 w-full h-full object-cover', alt: '' %>
            </div>
            <div class="p-4 relative">
              <%= image_tag webpack_asset_path("images/illustrations/wave_top-green-tint-1.png"), class: 'w-full absolute bottom-100 left-0 -mb-1', alt: '' %>
              <div class="flex flex-col h-full justify-center">
                <p class="font-semibold pb-4 text-center">
                  <%= t("views.welcome.index.climate_tips.#{item[:key]}") %>
                </p>
                <div class="text-center">
                  <a href="<%= item[:url] %>" class="button mx-auto"><%= t 'views.welcome.index.climate_tips.read_more' %></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
</section>

<%= render "shared/footer" %>
